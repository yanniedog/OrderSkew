/* OrderSkew Styles - 2026 rebuild */
:root {
    --font-main: "Space Grotesk", sans-serif;
    --font-display: "Sora", sans-serif;
    --font-mono: "JetBrains Mono", monospace;
    --color-bg: #f1ede3;
    --color-bg-accent: #e2efe8;
    --color-bg-grid: rgba(17, 94, 89, 0.1);
    --color-bg-glow-a: rgba(15, 118, 110, 0.2);
    --color-bg-glow-b: rgba(217, 119, 6, 0.18);
    --color-shell: rgba(255, 255, 255, 0.74);
    --color-shell-border: rgba(15, 76, 82, 0.22);
    --color-shell-shadow: 0 38px 88px -56px rgba(12, 31, 33, 0.56);
    --color-card: rgba(255, 255, 255, 0.93);
    --color-card-alt: #ecf5ef;
    --color-card-muted: #f6fbf8;
    --color-text: #102229;
    --color-text-secondary: #30505a;
    --color-text-muted: #607b84;
    --color-border: rgba(20, 78, 84, 0.2);
    --color-border-strong: rgba(20, 78, 84, 0.34);
    --color-primary: #0f766e;
    --color-primary-accent: #0b5d57;
    --color-primary-contrast: #ffffff;
    --color-secondary: #d97706;
    --color-secondary-hover: #b45309;
    --color-tooltip-bg: #0e2e35;
    --color-tooltip-text: #eef8f7;
    --color-table-row-even: rgba(235, 245, 240, 0.62);
    --color-table-row-odd: rgba(255, 255, 255, 0.82);
    --color-summary-bg: rgba(15, 118, 110, 0.12);
    --color-summary-border: rgba(15, 118, 110, 0.42);
    --color-executed-bg: rgba(34, 197, 94, 0.14);
    --color-invalid: #dc2626;
    --color-slider-track: #c8dddc;
    --color-slider-thumb: #0f766e;
    --color-chart-buy-start: #ef4444;
    --color-chart-buy-end: #ef4444;
    --color-chart-buy-area: rgba(239, 68, 68, 0.32);
    --color-chart-sell-start: #22c55e;
    --color-chart-sell-end: #22c55e;
    --color-chart-sell-area: rgba(34, 197, 94, 0.32);
    --focus-ring-color: rgba(15, 118, 110, 0.28);
    --shadow-sm: 0 2px 5px rgba(13, 27, 29, 0.08);
    --shadow-md: 0 14px 30px -24px rgba(13, 27, 29, 0.32);
    --shadow-lg: 0 28px 56px -36px rgba(13, 27, 29, 0.42);
}
body.theme-dark {
    --color-bg: #050f13;
    --color-bg-accent: #0a181d;
    --color-bg-grid: rgba(126, 188, 191, 0.12);
    --color-bg-glow-a: rgba(56, 189, 177, 0.24);
    --color-bg-glow-b: rgba(251, 146, 60, 0.18);
    --color-shell: rgba(8, 26, 31, 0.72);
    --color-shell-border: rgba(126, 188, 191, 0.26);
    --color-shell-shadow: 0 40px 90px -52px rgba(0, 0, 0, 0.9);
    --color-card: rgba(10, 30, 36, 0.92);
    --color-card-alt: #133540;
    --color-card-muted: #0f2b33;
    --color-text: #e4f5f3;
    --color-text-secondary: #bbd3d6;
    --color-text-muted: #89a7ad;
    --color-border: rgba(126, 188, 191, 0.22);
    --color-border-strong: rgba(126, 188, 191, 0.38);
    --color-primary: #2dd4bf;
    --color-primary-accent: #14b8a6;
    --color-primary-contrast: #032124;
    --color-secondary: #fb923c;
    --color-secondary-hover: #fdba74;
    --color-tooltip-bg: #e8f8f7;
    --color-tooltip-text: #083036;
    --color-table-row-even: rgba(13, 38, 45, 0.88);
    --color-table-row-odd: rgba(15, 44, 52, 0.84);
    --color-summary-bg: rgba(45, 212, 191, 0.12);
    --color-summary-border: rgba(45, 212, 191, 0.46);
    --color-executed-bg: rgba(34, 197, 94, 0.2);
    --color-invalid: #f87171;
    --color-slider-track: #194652;
    --color-slider-thumb: #2dd4bf;
    --color-chart-buy-start: #f87171;
    --color-chart-buy-end: #f87171;
    --color-chart-buy-area: rgba(248, 113, 113, 0.3);
    --color-chart-sell-start: #4ade80;
    --color-chart-sell-end: #4ade80;
    --color-chart-sell-area: rgba(74, 222, 128, 0.28);
    --focus-ring-color: rgba(45, 212, 191, 0.34);
}
* { box-sizing: border-box; }
.hidden { display: none !important; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
body.design-overhaul {
    font-family: var(--font-main);
    color: var(--color-text);
    line-height: 1.45;
    background-color: var(--color-bg);
    background-image: radial-gradient(circle at 10% 8%, var(--color-bg-glow-b), transparent 34%), radial-gradient(circle at 88% 82%, var(--color-bg-glow-a), transparent 34%), linear-gradient(145deg, var(--color-bg) 0%, var(--color-bg-accent) 100%);
    background-attachment: fixed;
    position: relative;
    padding-bottom: 82px;
    -webkit-font-smoothing: antialiased;
}
body.design-overhaul::before {
    content: "";
    position: fixed;
    inset: 0;
    background-image: linear-gradient(transparent 96%, var(--color-bg-grid) 96%), linear-gradient(90deg, transparent 96%, var(--color-bg-grid) 96%);
    background-size: 34px 34px;
    opacity: 0.45;
    pointer-events: none;
    z-index: -2;
}
body.design-overhaul::after {
    content: "";
    position: fixed;
    width: 56vmax;
    height: 56vmax;
    border-radius: 9999px;
    top: -36vmax;
    right: -18vmax;
    background: radial-gradient(circle, rgba(15, 118, 110, 0.2) 0%, rgba(15, 118, 110, 0) 70%);
    pointer-events: none;
    z-index: -1;
    animation: driftGlow 18s ease-in-out infinite alternate;
}
body.design-overhaul, body.design-overhaul button, body.design-overhaul input, body.design-overhaul select, body.design-overhaul textarea { font-family: var(--font-main); }
body.design-overhaul .font-solana { font-family: var(--font-display); letter-spacing: -0.03em; }
body.design-overhaul .font-mono, body.design-overhaul [class*="font-mono"], body.design-overhaul code { font-family: var(--font-mono); }
body.design-overhaul #intro-layer {
    background: radial-gradient(circle at 78% 14%, rgba(251, 146, 60, 0.34), transparent 36%), radial-gradient(circle at 16% 88%, rgba(45, 212, 191, 0.16), transparent 42%), linear-gradient(142deg, #07161d 0%, #0c2f39 58%, #14505c 100%) !important;
}
body.design-overhaul #intro-layer .relative.z-20 {
    border: 1px solid rgba(168, 224, 229, 0.32);
    border-radius: 1.4rem;
    background: linear-gradient(152deg, rgba(6, 21, 29, 0.84), rgba(7, 35, 41, 0.7));
    box-shadow: 0 36px 72px -44px rgba(0, 0, 0, 0.88);
    backdrop-filter: blur(8px);
    padding: 1.4rem 1.2rem 1.5rem;
}
body.design-overhaul #intro-layer h1 { font-family: var(--font-display); letter-spacing: -0.045em; background-image: linear-gradient(96deg, #f59e0b, #fb923c, #fdba74) !important; }
body.design-overhaul #intro-layer p { line-height: 1.42; }
body.design-overhaul #enter-app-btn {
    border: 1px solid rgba(255, 255, 255, 0.26);
    background: linear-gradient(102deg, #d97706 0%, #ea580c 56%, #fb923c 100%) !important;
    box-shadow: 0 22px 44px -26px rgba(249, 115, 22, 0.82) !important;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.28);
}
body.design-overhaul #intro-how-it-works { border-color: rgba(255, 255, 255, 0.35) !important; background: rgba(255, 255, 255, 0.12) !important; }
body.design-overhaul #skip-to-customize-btn { color: rgba(235, 245, 247, 0.74); }
body.design-overhaul #app {
    width: 100%;
    max-width: min(96rem, calc(100vw - 1rem));
    margin-inline: auto;
}
body.design-overhaul .app-shell {
    border: 1px solid var(--color-shell-border);
    border-radius: 1.75rem;
    background: linear-gradient(160deg, rgba(255, 255, 255, 0.66), rgba(238, 247, 242, 0.58));
    box-shadow: var(--color-shell-shadow);
    backdrop-filter: blur(20px);
    padding: 1.2rem;
    overflow: visible;
}
body.theme-dark.design-overhaul .app-shell { background: linear-gradient(162deg, rgba(8, 26, 31, 0.86), rgba(8, 30, 33, 0.72)); }
body.design-overhaul .app-header {
    border: 1px solid var(--color-border-strong);
    border-radius: 1.15rem;
    background: linear-gradient(138deg, rgba(255, 255, 255, 0.86), rgba(238, 247, 242, 0.74));
    box-shadow: 0 18px 36px -30px rgba(8, 28, 31, 0.44);
    padding: 0.8rem 0.9rem;
    position: sticky;
    top: 0.45rem;
    z-index: 80;
}
body.theme-dark.design-overhaul .app-header { background: linear-gradient(138deg, rgba(12, 38, 43, 0.92), rgba(8, 30, 34, 0.84)); }
body.design-overhaul .brand-block { position: relative; padding-left: 1rem; }
body.design-overhaul .brand-block::before {
    content: "";
    position: absolute;
    left: 0;
    top: 0.2rem;
    bottom: 0.2rem;
    width: 4px;
    border-radius: 999px;
    background: linear-gradient(180deg, var(--color-primary), var(--color-secondary));
}
body.design-overhaul #logo-header {
    background-image: linear-gradient(98deg, var(--color-primary), var(--color-secondary)) !important;
    font-size: clamp(1.5rem, 1.5vw + 1.05rem, 2.25rem);
    line-height: 1;
}
body.design-overhaul .brand-block p { margin-top: 0.4rem; color: var(--color-text-secondary) !important; max-width: 56ch; line-height: 1.35; }
body.design-overhaul .header-actions {
    border: 1px solid var(--color-border);
    border-radius: 999px;
    background: linear-gradient(130deg, rgba(255, 255, 255, 0.68), rgba(240, 248, 244, 0.56));
    padding: 0.35rem;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.58);
}
body.theme-dark.design-overhaul .header-actions { background: linear-gradient(130deg, rgba(16, 46, 50, 0.72), rgba(11, 35, 40, 0.64)); }
body.design-overhaul .header-tool-group { border-color: var(--color-border-strong) !important; background: color-mix(in srgb, var(--color-card-alt) 88%, transparent) !important; }
body.design-overhaul #actions-menu-btn,
body.design-overhaul #links-menu-btn,
body.design-overhaul #quick-save-menu-btn,
body.design-overhaul #how-it-works-btn,
body.design-overhaul #video-btn {
    border-color: var(--color-border-strong) !important;
    background: linear-gradient(145deg, var(--color-card-alt), color-mix(in srgb, var(--color-card) 85%, transparent)) !important;
    color: var(--color-text-muted) !important;
    min-height: 2.15rem;
}
body.design-overhaul #actions-menu-btn:hover,
body.design-overhaul #links-menu-btn:hover,
body.design-overhaul #quick-save-menu-btn:hover,
body.design-overhaul #how-it-works-btn:hover,
body.design-overhaul #video-btn:hover { color: var(--color-text) !important; border-color: var(--color-primary) !important; }
body.design-overhaul #actions-menu-dropdown,
body.design-overhaul #links-menu-dropdown,
body.design-overhaul #quick-save-menu-dropdown,
body.design-overhaul #mode-selector-dropdown {
    border: 1px solid var(--color-border-strong) !important;
    background: color-mix(in srgb, var(--color-card) 92%, transparent) !important;
    backdrop-filter: blur(14px);
    box-shadow: var(--shadow-lg);
}
body.design-overhaul #main-content-grid { width: 100%; min-width: 0; gap: clamp(0.9rem, 1.2vw, 1.35rem); }
body.design-overhaul #config-column, body.design-overhaul #graph-column { min-width: 0; max-width: 100%; }
body.design-overhaul .card {
    border: 1px solid var(--color-border);
    border-radius: 1.2rem;
    background: var(--color-card);
    box-shadow: var(--shadow-md);
    position: relative;
    overflow: hidden;
}
body.design-overhaul .card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(160deg, rgba(255, 255, 255, 0.24), transparent 34%);
    pointer-events: none;
}
body.design-overhaul .card-panel { border-color: var(--color-border-strong); }
body.design-overhaul .strategy-card { border-radius: 1.3rem; }
body.design-overhaul .strategy-card::after {
    content: "";
    position: absolute;
    top: 0;
    left: 1rem;
    right: 1rem;
    height: 3px;
    border-radius: 999px;
    background: linear-gradient(90deg, var(--color-primary), var(--color-secondary));
    opacity: 0.9;
}
body.design-overhaul .chart-card, body.design-overhaul .table-card { border-radius: 1.25rem; }
body.design-overhaul .card-masthead { border-bottom: 1px solid var(--color-border); padding-bottom: 0.72rem; margin-bottom: 0.85rem; }
body.design-overhaul .card-masthead h2 { font-family: var(--font-display); letter-spacing: -0.02em; font-size: clamp(1.02rem, 0.7vw + 0.86rem, 1.26rem); }
body.design-overhaul .strategy-grid { border-top: 0 !important; gap: 0.85rem; padding-top: 0.2rem !important; }
body.design-overhaul .strategy-panel {
    border: 1px solid var(--color-border);
    border-radius: 0.95rem;
    background: linear-gradient(176deg, color-mix(in srgb, var(--color-card) 76%, transparent), color-mix(in srgb, var(--color-card-muted) 88%, transparent));
    padding: 0.75rem;
}
body.design-overhaul .strategy-panel h3 { font-family: var(--font-display); font-size: 0.66rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--color-text-secondary) !important; }
body.design-overhaul .form-input, body.design-overhaul select.form-input {
    border: 1.5px solid var(--color-border);
    border-radius: 0.72rem;
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-card) 78%, transparent), var(--color-card-muted));
    color: var(--color-text);
    transition: border-color 0.18s ease, box-shadow 0.18s ease, background-color 0.18s ease;
    font-size: 0.9rem;
}
body.design-overhaul .form-input:focus,
body.design-overhaul select.form-input:focus,
body.design-overhaul .form-input:focus-visible,
body.design-overhaul select.form-input:focus-visible {
    outline: 0;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--focus-ring-color);
    background: var(--color-card);
}
body.design-overhaul .input-helper-text { color: var(--color-text-muted); font-size: 0.67rem; margin-top: 0.25rem; line-height: 1.35; }
body.design-overhaul .input-helper-text--compact { font-size: 0.62rem; margin-top: 0.15rem; }
body.design-overhaul .helper-tooltip {
    width: 18px;
    height: 18px;
    border-radius: 999px;
    border: 1px solid var(--color-border);
    color: var(--color-text-muted);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 0.66rem;
    flex-shrink: 0;
    cursor: pointer;
    background: transparent;
    transition: all 0.2s ease;
}
body.design-overhaul .helper-tooltip:hover, body.design-overhaul .helper-tooltip:focus-visible { border-color: var(--color-primary); color: var(--color-primary); }
body.design-overhaul .helper-tooltip-popup {
    left: 0;
    top: calc(100% + 6px);
    white-space: normal;
    line-height: 1.4;
    border: 1px solid var(--color-border);
    border-radius: 0.6rem;
    padding: 0.45rem 0.55rem;
    background: var(--color-card);
    box-shadow: var(--shadow-md);
    z-index: 40;
}
body.design-overhaul .helper-tooltip-popup.hidden { display: none; }
body.design-overhaul input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    border-radius: 999px;
    background: linear-gradient(90deg, color-mix(in srgb, var(--color-primary) 58%, transparent), color-mix(in srgb, var(--color-secondary) 58%, transparent));
    outline: 0;
}
body.design-overhaul input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    border: 2px solid #ffffff;
    cursor: pointer;
    box-shadow: 0 6px 16px -8px rgba(0, 0, 0, 0.42);
}
body.design-overhaul input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 999px;
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    border: 2px solid #ffffff;
    cursor: pointer;
}
button, .btn-primary, .btn-secondary, .mode-card, .fee-type-btn, .chart-toggle-btn, .pill-toggle-btn, .wizard-option {
    min-height: 42px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    -webkit-user-select: none;
}
body.design-overhaul .btn-primary {
    background: linear-gradient(108deg, var(--color-primary), #0ea5a2);
    color: var(--color-primary-contrast);
    box-shadow: var(--shadow-sm);
    border: 0;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
body.design-overhaul .btn-primary:hover { transform: translateY(-1px); box-shadow: var(--shadow-md); }
body.design-overhaul .btn-secondary {
    border: 1px solid var(--color-border);
    background: linear-gradient(146deg, var(--color-card-alt), color-mix(in srgb, var(--color-card) 86%, transparent));
    color: var(--color-text);
    transition: transform 0.2s ease, border-color 0.2s ease;
}
body.design-overhaul .btn-secondary:hover { border-color: var(--color-primary); }
body.design-overhaul .fee-type-btn,
body.design-overhaul .chart-toggle-btn,
body.design-overhaul .pill-toggle-btn,
body.design-overhaul .mode-switch-pill {
    border-radius: 999px;
    border: 1px solid transparent;
    color: var(--color-text-muted);
    background: transparent;
    transition: all 0.18s ease;
    cursor: pointer;
}
body.design-overhaul .fee-type-btn:hover,
body.design-overhaul .chart-toggle-btn:hover,
body.design-overhaul .pill-toggle-btn:hover,
body.design-overhaul .mode-switch-pill:hover { color: var(--color-text); }
body.design-overhaul .fee-type-btn.active,
body.design-overhaul .chart-toggle-btn.active,
body.design-overhaul .pill-toggle-btn.active {
    color: #ffffff;
    border-color: transparent;
    background: linear-gradient(104deg, var(--color-primary), #0ea5a2);
    box-shadow: 0 8px 16px -10px rgba(15, 118, 110, 0.7);
}
body.design-overhaul .mode-dropdown-option { cursor: pointer; transition: all 0.15s ease; }
body.design-overhaul .mode-dropdown-option:hover, body.design-overhaul .mode-dropdown-option:focus-visible { background: color-mix(in srgb, var(--color-primary) 10%, transparent); outline: none; }
body.design-overhaul .mode-dropdown-option[aria-selected="true"] { background: color-mix(in srgb, var(--color-primary) 12%, transparent); }
body.design-overhaul details { border: 1px solid var(--color-border); border-radius: 0.8rem; background: color-mix(in srgb, var(--color-card) 86%, transparent); }
body.design-overhaul details[open] { border-color: var(--color-border-strong); }
body.design-overhaul .accordion-summary {
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.4rem;
    cursor: pointer;
    padding: 0.6rem 0.72rem;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--color-text-secondary);
    font-weight: 700;
}
body.design-overhaul .accordion-summary:hover { color: var(--color-primary); }
body.design-overhaul .accordion-summary svg { color: var(--color-text-muted); transition: transform 0.2s ease; }
body.design-overhaul details[open] .accordion-summary svg { transform: rotate(180deg); }
body.design-overhaul .accordion-summary::-webkit-details-marker { display: none; }
body.design-overhaul .accordion-content { padding: 0.2rem 0.72rem 0.72rem; }
.sell-mode-active .buy-only-content,
.sell-mode-active #tab-buy,
.sell-mode-active .chart-buy-legend { display: none !important; }
.buy-only-mode-active .sell-only-content,
.buy-only-mode-active #tab-sell,
.buy-only-mode-active .chart-sell-legend,
.buy-only-mode-active .avg-sell-section { display: none !important; }
.sell-mode-active .floor-buy-field { display: none !important; }
.buy-only-mode-active .floor-sell-field { display: none !important; }
.advanced-toggle {
    display: inline-flex;
    align-items: center;
    gap: 0.48rem;
    border: 1px solid var(--color-border);
    border-radius: 999px;
    background: color-mix(in srgb, var(--color-card-alt) 88%, transparent);
    padding: 0.32rem 0.6rem;
    cursor: pointer;
    user-select: none;
}
.advanced-toggle:hover { border-color: var(--color-primary); }
.advanced-toggle input { position: absolute; opacity: 0; width: 0; height: 0; }
.toggle-track { position: relative; width: 36px; height: 20px; border-radius: 999px; background: var(--color-border); transition: background 0.2s ease; }
.toggle-thumb { position: absolute; top: 2px; left: 2px; width: 16px; height: 16px; border-radius: 999px; background: #ffffff; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25); transition: transform 0.2s ease; }
.advanced-toggle input:checked + .toggle-track { background: var(--color-primary); }
.advanced-toggle input:checked + .toggle-track .toggle-thumb { transform: translateX(16px); }
.toggle-label { font-size: 0.62rem; text-transform: uppercase; letter-spacing: 0.08em; font-weight: 700; color: var(--color-text-muted); }
.advanced-toggle input:checked ~ .toggle-label { color: var(--color-primary); }
body.design-overhaul #depth-chart-card {
    min-height: 320px;
    background: linear-gradient(176deg, color-mix(in srgb, var(--color-card) 82%, transparent), color-mix(in srgb, var(--color-card-muted) 84%, transparent));
}
body.design-overhaul .chart-card-head {
    border: 1px solid var(--color-border);
    border-radius: 0.86rem;
    background: linear-gradient(135deg, color-mix(in srgb, var(--color-card) 90%, transparent), color-mix(in srgb, var(--color-card-alt) 84%, transparent));
    padding: 0.55rem 0.66rem;
    margin-bottom: 0.62rem;
}
body.design-overhaul #depth-wrapper {
    border: 1px solid var(--color-border);
    border-radius: 1rem;
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-card) 78%, transparent), color-mix(in srgb, var(--color-card-muted) 86%, transparent));
    padding: 0.35rem;
    min-height: 0;
    flex: 1 1 0;
    overflow: hidden;
}
body.design-overhaul #mid-price-label { font-size: 0.72rem; letter-spacing: 0.04em; }
body.design-overhaul #chart-summary-overlay > div {
    border: 1px solid var(--color-summary-border);
    border-radius: 0.9rem;
    background: linear-gradient(154deg, color-mix(in srgb, var(--color-card) 94%, transparent), color-mix(in srgb, var(--color-summary-bg) 34%, transparent));
    box-shadow: var(--shadow-md);
}
body.design-overhaul .d3-chart text { fill: var(--color-text-secondary); font-family: var(--font-main); font-size: 10px; }
body.design-overhaul .d3-chart .domain,
body.design-overhaul .d3-chart .tick line { stroke: var(--color-border-strong); opacity: 0.55; }
body.design-overhaul #data-tables-card {
    background: linear-gradient(178deg, color-mix(in srgb, var(--color-card) 88%, transparent), color-mix(in srgb, var(--color-card-muted) 84%, transparent));
}
body.design-overhaul .table-card-head {
    border-bottom: 1px solid var(--color-border-strong) !important;
    background: linear-gradient(135deg, color-mix(in srgb, var(--color-card-alt) 88%, transparent), color-mix(in srgb, var(--color-card) 90%, transparent));
}
body.design-overhaul .table-tab-strip {
    border: 1px solid var(--color-border);
    border-radius: 0.78rem;
    margin: 0.34rem;
    padding: 0.2rem;
    gap: 0.2rem;
    background: color-mix(in srgb, var(--color-card-muted) 80%, transparent);
}
body.design-overhaul .table-tab-btn {
    border-radius: 0.62rem !important;
    border-bottom: 0 !important;
    font-weight: 700 !important;
    letter-spacing: 0.03em;
}
body.design-overhaul #table-options { gap: 0.45rem 0.7rem; padding-inline: 0.75rem; }
body.design-overhaul .table-header th {
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-primary) 16%, transparent), color-mix(in srgb, var(--color-primary) 6%, transparent));
    color: var(--color-text-secondary);
    font-size: 0.64rem;
    letter-spacing: 0.08em;
    font-weight: 700;
}
body.design-overhaul .table-row-even td { background: var(--color-table-row-even); }
body.design-overhaul .table-row-odd td { background: var(--color-table-row-odd); }
body.design-overhaul .executed-rung td {
    background: var(--color-executed-bg) !important;
    border-top: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
    border-bottom: 1px solid color-mix(in srgb, var(--color-border) 70%, transparent);
}
body.design-overhaul .copy-cursor { cursor: copy; transition: background-color 0.18s ease, transform 0.12s ease; }
body.design-overhaul .copy-cursor:hover { background: color-mix(in srgb, var(--color-primary) 12%, transparent); }
body.design-overhaul .copy-cursor:active { transform: scale(0.99); }
body.design-overhaul #tooltip {
    position: absolute;
    z-index: 120;
    padding: 0.52rem 0.65rem;
    border-radius: 0.6rem;
    border: 1px solid color-mix(in srgb, var(--color-tooltip-bg) 55%, transparent);
    background: var(--color-tooltip-bg);
    color: var(--color-tooltip-text);
    box-shadow: var(--shadow-lg);
    pointer-events: none;
    opacity: 0;
    font-size: 0.73rem;
    line-height: 1.3;
    max-width: 230px;
    white-space: normal;
}
body.design-overhaul #tooltip.hidden { opacity: 0; }
body.design-overhaul .mobile-sticky-footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    flex-direction: column;
    z-index: 95;
    border-top: 1px solid var(--color-border-strong);
    background: linear-gradient(136deg, color-mix(in srgb, var(--color-card) 94%, transparent), color-mix(in srgb, var(--color-card-alt) 86%, transparent));
    box-shadow: 0 -18px 38px -26px rgba(11, 28, 31, 0.5);
    backdrop-filter: blur(18px);
    padding: 0.58rem 0.95rem 0.7rem;
    transform: translateY(115%);
    transition: transform 0.28s ease;
}
body.design-overhaul .mobile-sticky-footer.visible { transform: translateY(0); }
body.design-overhaul #sticky-details { gap: 0.55rem 0.68rem; }
body.design-overhaul .qr-modal {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.24s ease;
}
body.design-overhaul .qr-modal.open { opacity: 1; pointer-events: auto; }
body.design-overhaul .qr-backdrop { position: absolute; inset: 0; background: rgba(4, 17, 20, 0.7); backdrop-filter: blur(6px); }
body.design-overhaul .qr-content {
    position: relative;
    width: 100%;
    border-radius: 1.1rem;
    border: 1px solid var(--color-border-strong);
    background: linear-gradient(156deg, color-mix(in srgb, var(--color-card) 96%, transparent), color-mix(in srgb, var(--color-card-alt) 88%, transparent));
    box-shadow: var(--shadow-lg);
    transform: translateY(10px) scale(0.985);
    transition: transform 0.24s ease;
}
body.design-overhaul .qr-modal.open .qr-content { transform: translateY(0) scale(1); }
body.design-overhaul .guide-shell {
    border: 1px solid var(--color-border-strong);
    border-radius: 1.25rem;
    box-shadow: 0 34px 72px -36px rgba(0, 0, 0, 0.62);
    overflow-x: hidden;
    overflow-y: auto;
    max-height: min(90vh, calc(100vh - 2rem));
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
}
body.design-overhaul .guide-header {
    padding: 1.15rem 1.18rem 1rem;
    background: radial-gradient(circle at 82% 18%, rgba(251, 146, 60, 0.26), transparent 38%), linear-gradient(136deg, #08323a 0%, #0d4b4a 60%, #145f58 100%);
    color: #effdf6;
}
body.design-overhaul .guide-kicker { font-size: 0.62rem; text-transform: uppercase; letter-spacing: 0.14em; opacity: 0.86; margin-bottom: 0.26rem; }
body.design-overhaul .guide-title { font-family: var(--font-display); font-size: clamp(1.24rem, 2.6vw, 1.78rem); line-height: 1.13; letter-spacing: -0.02em; }
body.design-overhaul .guide-subtitle { margin-top: 0.45rem; font-size: 0.85rem; line-height: 1.42; opacity: 0.93; max-width: 60ch; }
body.design-overhaul .guide-chip-row { margin-top: 0.66rem; display: flex; flex-wrap: wrap; gap: 0.36rem; }
body.design-overhaul .guide-chip {
    font-size: 0.64rem;
    text-transform: uppercase;
    letter-spacing: 0.07em;
    font-weight: 700;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.15);
    padding: 0.32rem 0.55rem;
}
body.design-overhaul .guide-body {
    background: linear-gradient(180deg, color-mix(in srgb, var(--color-card) 95%, transparent), color-mix(in srgb, var(--color-card-muted) 90%, transparent));
    padding: 0.94rem 1rem;
    display: grid;
    gap: 0.7rem;
}
body.design-overhaul .guide-sequence,
body.design-overhaul .guide-detail {
    border: 1px solid var(--color-border);
    border-radius: 0.9rem;
    background: color-mix(in srgb, var(--color-card) 88%, transparent);
    overflow: hidden;
}
body.design-overhaul .guide-section-title { font-size: 0.77rem; text-transform: uppercase; letter-spacing: 0.09em; font-weight: 700; color: var(--color-text-secondary); margin-bottom: 0.52rem; }
body.design-overhaul .guide-step-list { list-style: none; margin: 0; display: grid; gap: 0.46rem; }
body.design-overhaul .guide-step-list li { display: grid; grid-template-columns: 1.52rem minmax(0, 1fr); gap: 0.5rem; align-items: start; }
body.design-overhaul .guide-step-list li span {
    width: 1.52rem;
    height: 1.52rem;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #ffffff;
    font-size: 0.7rem;
    font-weight: 700;
    background: linear-gradient(128deg, var(--color-primary), #0ea5a2);
}
body.design-overhaul .guide-step-list li p { font-size: 0.78rem; color: var(--color-text-secondary); padding-top: 0.14rem; }
body.design-overhaul .guide-detail > summary {
    list-style: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
    padding: 0.7rem 0.82rem;
    font-size: 0.8rem;
    font-weight: 700;
    background: linear-gradient(144deg, color-mix(in srgb, var(--color-card-muted) 88%, transparent), color-mix(in srgb, var(--color-card) 82%, transparent));
}
body.design-overhaul .guide-detail > summary::-webkit-details-marker { display: none; }
body.design-overhaul .guide-detail[open] > summary svg { transform: rotate(180deg); }
body.design-overhaul .guide-detail-content { padding: 0.74rem; display: grid; gap: 0.65rem; }
body.design-overhaul .guide-note {
    border: 1px dashed var(--color-summary-border);
    border-radius: 0.66rem;
    background: var(--color-summary-bg);
    color: var(--color-text-secondary);
    font-size: 0.74rem;
    padding: 0.48rem 0.55rem;
}
body.design-overhaul .guide-chart-grid,
body.design-overhaul .guide-mode-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 0.56rem; }
body.design-overhaul .guide-chart-card,
body.design-overhaul .guide-mode-card { border: 1px solid var(--color-border); border-radius: 0.78rem; background: color-mix(in srgb, var(--color-card) 90%, transparent); padding: 0.56rem; }
body.design-overhaul .guide-chart-card header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.4rem; }
body.design-overhaul .guide-chart-card header p { font-size: 0.72rem; font-weight: 700; }
body.design-overhaul .guide-chart-card header span { font-size: 0.62rem; color: var(--color-text-muted); }
body.design-overhaul .guide-chart-stage { height: 130px; border: 1px solid var(--color-border); border-radius: 0.62rem; background: var(--color-card-muted); overflow: hidden; }
body.design-overhaul .guide-caption { margin-top: 0.38rem; font-size: 0.65rem; color: var(--color-text-secondary); }
body.design-overhaul .guide-mode-card h5 { font-size: 0.75rem; font-weight: 700; margin-bottom: 0.24rem; }
body.design-overhaul .guide-mode-card p { font-size: 0.67rem; color: var(--color-text-secondary); }
body.design-overhaul .guide-mode-card--buy { border-left: 4px solid #ef4444; }
body.design-overhaul .guide-mode-card--sell { border-left: 4px solid #22c55e; }
body.design-overhaul .guide-mode-card--both { border-left: 4px solid #0ea5e9; }
body.design-overhaul .guide-mode-card--short { border-left: 4px solid #f97316; }
body.design-overhaul .guide-risk-list { margin: 0; padding-left: 1rem; display: grid; gap: 0.34rem; color: var(--color-text-secondary); font-size: 0.74rem; }
body.design-overhaul .guide-footer { border-top: 1px solid var(--color-border); background: linear-gradient(180deg, color-mix(in srgb, var(--color-card-alt) 84%, transparent), color-mix(in srgb, var(--color-card) 90%, transparent)); padding: 0.82rem 1rem 0.94rem; }
body.design-overhaul #setup-wizard { transition: opacity 0.25s ease; }
body.design-overhaul #setup-wizard.open { opacity: 1; pointer-events: auto; }
body.design-overhaul #setup-wizard > div {
    border: 1px solid var(--color-border-strong);
    background: linear-gradient(162deg, color-mix(in srgb, var(--color-card) 95%, transparent), color-mix(in srgb, var(--color-card-muted) 88%, transparent));
    box-shadow: var(--shadow-lg);
    transition: transform 0.3s ease;
}
body.design-overhaul #setup-wizard.open > div { transform: scale(1); }
body.design-overhaul .wizard-question { animation: riseIn 0.3s ease; }
body.design-overhaul .wizard-input {
    width: 100%;
    padding: 0.86rem 1.08rem;
    border: 1.5px solid var(--color-border);
    border-radius: 0.78rem;
    background: color-mix(in srgb, var(--color-card-muted) 90%, transparent);
    color: var(--color-text);
    font-size: 1.03rem;
    font-weight: 600;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
body.design-overhaul .wizard-input:focus { outline: 0; border-color: var(--color-primary); box-shadow: 0 0 0 3px var(--focus-ring-color); }
body.design-overhaul .wizard-input::placeholder { color: var(--color-text-muted); opacity: 0.75; }
body.design-overhaul .wizard-option,
body.design-overhaul .wizard-mode-option {
    border: 1.5px solid var(--color-border);
    border-radius: 0.85rem;
    background: color-mix(in srgb, var(--color-card-muted) 88%, transparent);
    padding: 0.9rem 1rem;
    transition: all 0.2s ease;
}
body.design-overhaul .wizard-option:hover,
body.design-overhaul .wizard-mode-option:hover,
body.design-overhaul .wizard-option.selected {
    border-color: var(--color-primary);
    box-shadow: 0 12px 22px -16px rgba(15, 118, 110, 0.5);
    transform: translateY(-1px);
}
body.design-overhaul .wizard-hint {
    font-size: 0.88rem;
    color: var(--color-text-muted);
    border-left: 3px solid var(--color-primary);
    border-radius: 0.55rem;
    background: color-mix(in srgb, var(--color-summary-bg) 70%, transparent);
    padding: 0.62rem 0.72rem;
}
body.design-overhaul .wizard-error {
    display: none;
    margin-top: 0.45rem;
    border: 1px solid color-mix(in srgb, var(--color-invalid) 40%, transparent);
    border-radius: 0.56rem;
    background: color-mix(in srgb, var(--color-invalid) 12%, transparent);
    color: var(--color-invalid);
    font-size: 0.82rem;
    padding: 0.52rem 0.64rem;
}
body.design-overhaul .wizard-error.show { display: block; }
body.design-overhaul #wizard-progress { background: linear-gradient(96deg, var(--color-primary), var(--color-secondary)); }
body.design-overhaul .wizard-tooltip-content { border: 1px solid var(--color-border); border-radius: 0.65rem; background: var(--color-card); box-shadow: var(--shadow-md); }
body.design-overhaul .toast {
    position: fixed;
    left: 50%;
    bottom: 1.7rem;
    transform: translate(-50%, 20px);
    border-radius: 999px;
    background: linear-gradient(106deg, var(--color-primary), #0ea5a2);
    color: #ffffff;
    font-size: 0.82rem;
    font-weight: 700;
    padding: 0.5rem 0.9rem;
    box-shadow: var(--shadow-lg);
    opacity: 0;
    pointer-events: none;
    z-index: 2000;
    transition: all 0.24s ease;
}
body.design-overhaul .toast.show { opacity: 1; transform: translate(-50%, 0); }
button:focus-visible,
.btn-primary:focus-visible,
.btn-secondary:focus-visible,
.mode-switch-pill:focus-visible,
.fee-type-btn:focus-visible,
.chart-toggle-btn:focus-visible,
.pill-toggle-btn:focus-visible,
.wizard-option:focus-visible,
.wizard-mode-option:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}
@keyframes riseIn {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes driftGlow {
    from { transform: translate(0, 0) scale(1); }
    to { transform: translate(-44px, 28px) scale(1.06); }
}
.animate-fade-in { animation: riseIn 0.46s ease both; }
@media (min-width: 768px) {
    body.design-overhaul .app-shell { padding: 1.6rem; }
}
@media (min-width: 1024px) {
    body.design-overhaul { padding-bottom: 0; }
    body.design-overhaul #main-content-grid.app-layout-grid { grid-template-columns: minmax(330px, 1.04fr) minmax(440px, 1.36fr); gap: 1.12rem; }
    body.design-overhaul #config-column.controls-column { grid-column: 1; align-self: start; position: sticky; top: 0.88rem; }
    body.design-overhaul #graph-column.viz-column { grid-column: 2; display: grid; grid-template-rows: minmax(420px, 1fr) auto; gap: 1rem; }
    body.design-overhaul #depth-chart-card { margin-bottom: 0; }
}
@media (max-width: 1023px) {
    body.design-overhaul #app { max-width: calc(100vw - 0.5rem); }
    body.design-overhaul .app-header { position: static; }
    body.design-overhaul .header-actions { width: 100%; justify-content: space-between; border-radius: 0.92rem; }
    body.design-overhaul #main-content-grid { gap: 0.82rem; }
    body.design-overhaul #config-column > * + *,
    body.design-overhaul #graph-column > * + * { margin-top: 0.82rem; }
}
@media (max-width: 767px) {
    body.design-overhaul { line-height: 1.4; padding-bottom: 78px; }
    body.design-overhaul::before { opacity: 0.34; }
    body.design-overhaul .app-shell { border-radius: 1.22rem; padding: 0.72rem; }
    body.design-overhaul .app-header { border-radius: 0.95rem; padding: 0.68rem; }
    body.design-overhaul .brand-block { padding-left: 0.7rem; }
    body.design-overhaul .brand-block p { font-size: 0.79rem; max-width: 38ch; }
    body.design-overhaul .header-actions { padding: 0.3rem; gap: 0.3rem; }
    body.design-overhaul .header-tool-group { flex: 1; min-width: 0; }
    body.design-overhaul .header-tool-group button { flex: 1; justify-content: center; padding-inline: 0.52rem; }
    body.design-overhaul .card { border-radius: 1rem; }
    body.design-overhaul .strategy-card,
    body.design-overhaul .chart-card,
    body.design-overhaul .table-card { border-radius: 0.94rem; }
    body.design-overhaul .strategy-panel { border-radius: 0.76rem; padding: 0.6rem; }
    body.design-overhaul #depth-chart-card { padding: 0.7rem !important; min-height: 350px; height: auto; }
    body.design-overhaul .chart-card-head { border-radius: 0.76rem; padding: 0.46rem 0.52rem; }
    body.design-overhaul #depth-wrapper { min-height: 260px; }
    body.design-overhaul #chart-summary-overlay { position: static; transform: none; margin-top: 0.52rem; pointer-events: auto; }
    body.design-overhaul #chart-summary-overlay > div { width: 100%; max-width: none; min-width: 0; }
    body.design-overhaul #data-tables-card { margin-bottom: 7.6rem; }
    body.design-overhaul #data-tables-card .relative { padding-bottom: 5rem; }
    body.design-overhaul #data-tables-card table th,
    body.design-overhaul #data-tables-card table td { padding-top: 0.5rem; padding-bottom: 0.5rem; padding-inline: 0.5rem; }
    body.design-overhaul #data-tables-card table td { font-size: 0.72rem; }
    body.design-overhaul #setup-wizard { align-items: flex-start !important; padding-top: 1.5rem; }
    body.design-overhaul #setup-wizard > div { max-height: calc(100vh - 2rem); margin-top: 0; }
    body.design-overhaul .guide-header { padding: 0.9rem 0.84rem 0.82rem; }
    body.design-overhaul .guide-subtitle { font-size: 0.77rem; }
    body.design-overhaul .guide-body { padding: 0.72rem; }
    body.design-overhaul .guide-step-list li { grid-template-columns: 1.34rem minmax(0, 1fr); gap: 0.4rem; }
    body.design-overhaul .guide-step-list li span { width: 1.34rem; height: 1.34rem; font-size: 0.66rem; }
    body.design-overhaul .guide-chart-grid,
    body.design-overhaul .guide-mode-grid { grid-template-columns: 1fr; }
    body.design-overhaul .guide-chart-stage { height: 116px; }
    body.design-overhaul .guide-footer { padding: 0.74rem 0.74rem 0.86rem; }
}
@media (max-width: 639px) {
    #enter-app-btn { width: 100%; max-width: 330px; padding: 0.9rem 1rem; font-size: 0.9rem; }
    #intro-how-it-works,
    #skip-to-customize-btn { font-size: 0.78rem; }
    #mode-simple,
    #mode-pro { min-height: 34px; padding-inline: 0.62rem; font-size: 0.68rem; }
    #tab-buy,
    #tab-sell { min-height: 40px; padding-block: 0.74rem; font-size: 0.76rem; }
    .fee-type-btn,
    .chart-toggle-btn,
    .pill-toggle-btn { min-height: 34px; padding-inline: 0.64rem; }
    #wizard-back,
    #wizard-next,
    #wizard-skip,
    #qr-close,
    #video-close,
    #how-it-works-close { min-height: 40px; }
}
@media (hover: none) and (pointer: coarse) {
    .btn-primary:hover,
    .btn-secondary:hover,
    .wizard-option:hover,
    .wizard-mode-option:hover { transform: none; }
    .btn-primary:active,
    .btn-secondary:active,
    .wizard-option:active,
    .wizard-mode-option:active { transform: scale(0.985); }
}
@media (max-height: 520px) {
    body.design-overhaul #setup-wizard { align-items: flex-start !important; padding-top: 0.8rem; }
    body.design-overhaul #setup-wizard > div { max-height: calc(100vh - 1rem); overflow-y: auto; }
}
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 1ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 1ms !important;
        scroll-behavior: auto !important;
    }
}
